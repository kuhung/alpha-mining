# 解读101个量化因子｜Alpha#30: 价格变动符号排名与成交量比率的乘积

**原始公式**:

```
(((1.0 - rank(((sign((close - delay(close, 1))) + sign((delay(close, 1) - delay(close, 2)))) + sign((delay(close, 2) - delay(close, 3)))))) * sum(volume, 5)) / sum(volume, 20))
```

**核心逻辑**:
该因子首先计算过去三天每日价格变动的符号之和 (`sign_sum`)。这个 `sign_sum` 反映了价格在短期内的趋势方向和一致性。然后，对 `sign_sum` 进行横截面百分位排名，并从1.0中减去该排名值 (`rank_transformed`)，这意味着原始 `sign_sum` 排名越低（例如，持续下跌），`rank_transformed` 的值越高。
同时，计算5日累计成交量与20日累计成交量的比率 (`volume_ratio`)，这反映了近期成交量的相对活跃度。
最终的 Alpha 值为 `rank_transformed` 乘以 `volume_ratio` (需要注意处理 `sum(volume, 20)` 可能为零的情况)。


Alpha#30 结合了价格变动的短期持续性信号（经过排名和反转处理）与成交量的相对强度信号。
`1.0 - rank(sign_sum)` 这部分倾向于给那些近期价格表现疲软（例如连续下跌导致 `sign_sum` 较低，从而 `rank` 较低，最终 `1.0 - rank` 较高）的资产赋予更高的权重。
当这种价格行为特征与特定的成交量模式（例如，短期成交量相对于中长期显著放大或萎缩）相结合时，因子值会相应调整。例如，一个持续下跌（`rank_transformed` 较高）且近期成交量激增（`volume_ratio` 较高）的股票，可能会得到一个相对较高的 Alpha#30 值，这可能被解读为潜在的"恐慌抛售"或"下跌末端放量"信号。

---

### 日本語訳

# 101の量的要因の解釈｜Alpha#30: 価格変動符号ランキングと出来高比率の積

**数式**:

```
(((1.0 - rank(((sign((close - delay(close, 1))) + sign((delay(close, 1) - delay(close, 2)))) + sign((delay(close, 2) - delay(close, 3)))))) * sum(volume, 5)) / sum(volume, 20))
```

**コアロジック**:
このファクターは、まず過去3日間の日次価格変動の符号の合計（`sign_sum`）を計算します。この `sign_sum` は、短期的な価格のトレンド方向と一貫性を反映します。次に、`sign_sum` をクロスセクションでパーセンタイルランキングし、そのランキング値を1.0から減算します（`rank_transformed`）。これは、元の `sign_sum` のランキングが低い（例えば、連続下落）ほど、`rank_transformed` の値が高くなることを意味します。
同時に、5日間累積出来高と20日間累積出来高の比率（`volume_ratio`）を計算します。これは、最近の出来高の相対的な活発度を反映します。
最終的なAlpha値は、`rank_transformed` に `volume_ratio` を乗じたものです（`sum(volume, 20)` がゼロになる可能性に対処する必要があります）。

**解釈**:
Alpha#30は、価格変動の短期的な持続性シグナル（ランキングと反転処理を経たもの）と出来高の相対的な強度シグナルを組み合わせたものです。
`1.0 - rank(sign_sum)` の部分は、最近の価格パフォーマンスが弱い（例えば、連続下落により `sign_sum` が低くなり、結果として `rank` が低くなり、最終的に `1.0 - rank` が高くなる）資産に、より高い重みを与える傾向があります。
この価格行動特性が特定の出来高パターン（例えば、短期出来高が中長期出来高に対して著しく増加または減少）と組み合わさると、ファクター値は相応に調整されます。例えば、連続下落（`rank_transformed` が高い）し、かつ最近の出来高が急増（`volume_ratio` が高い）している株式は、比較的に高いAlpha#30値を得る可能性があり、これは潜在的な「パニック売り」または「下落最終局面での出来高増加」シグナルと解釈されるかもしれません。
